{% extends "RUS/base_assets.html" %}
{% block title %}
    Новый счёт
{% endblock %}
{% block style %}
    {# Для выпадающего списка с возможность ввода #}
        <script type="text/javascript" src="/media/js/dropdown.js"></script> 
        <link rel="stylesheet" type="text/css" href="/media/css/dropdown.css" /> 
    {# нужно для добавления нового поставщика. Проверка изменения значения поля и обработка ввода нового поставщика проводится в скрипте в get_contractor_list.html #}
    <script type="text/javascript" src="/media/js/bill_contractor.js"></script>
    {# нужно для работы с активами #}
    <script type="text/javascript" src="/media/js/bill_assets.js"></script>    
    <style>
    </style>
{% endblock %}
{% block content %}
    <div id="message">
        </div>
    <div id="content_to_hide">
        {% if form.errors %}
        {#    {{form.errors}} #}
        {% endif %}
        <form action="" method="post" id="bill_form">
            {% csrf_token %}
            <input type="hidden" id="max_asset_form_number" name="max_asset_form_number" value=0 />
            <table border=1>
                {{ NewCashBillForm.as_table }}
                <tr>
                    <th>
                        <label for="contractor">Поставщик:</label>
                    </th>
                    <td>
                        <ul class="errorlist" id="contractor_error">
                            <li>Обязательное поле.</li>
                        </ul>
                        <div id="contractors_list">
                            {{contractors_list|safe}}
                        </div>
                    </td>
                </tr>
            </table>
            {# сюда мы будем бросать кости - активы в чеке/счёте #}
            <div id="bill_assets">
            </div>
            {# Список формируется через api get_asset_type_list с id=asset_type_id #}
            {{asset_types_list|safe}}
            <input type="button" value="+" onclick="add_asset($('#asset_type_id option:selected').val())" />
            # TODO: Надо проверять валидность посылаемых данных
            <input type="submit" />
        </form>
    </div>
    <div id="additional_content">
    </div>
    <script>
        //$('#bill_form').submit(function(e){
        //    e.preventDefault();
            //твой код
        //})
    </script>
    {% endblock %}
